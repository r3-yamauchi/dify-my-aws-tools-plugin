identity:
  name: bedrock_retrieve
  author: AWS
  label:
    en_US: Bedrock Retrieve
    zh_Hans: Bedrock检索
    pt_BR: Bedrock Retrieve
    ja_JP: Bedrock Retrieve
  icon: icon.svg

description:
  human:
    en_US: A tool for retrieving relevant information from Amazon Bedrock Knowledge Base.
    zh_Hans: Amazon Bedrock知识库检索工具
    pt_BR: A tool for retrieving relevant information from Amazon Bedrock Knowledge Base.
    ja_JP: "Amazon Bedrock Knowledge Base からユーザーのクエリに最も関連性の高いドキュメントチャンクを検索して返します。"
  llm: A tool for retrieving relevant information from Amazon Bedrock Knowledge Base.

parameters:
  - name: aws_region
    type: string
    required: false
    label:
      en_US: AWS Region
      zh_Hans: AWS区域
      ja_JP: AWS リージョン
    human_description:
      en_US: AWS region for the Bedrock service
      zh_Hans: Bedrock服务的AWS区域
      ja_JP: Bedrock サービスを利用する AWS リージョン
    form: form

  - name: aws_access_key_id
    type: string
    required: false
    label:
      en_US: AWS Access Key ID
      zh_Hans: AWS访问密钥ID
      ja_JP: AWS アクセスキー ID
    human_description:
      en_US: AWS access key ID for authentication (optional)
      zh_Hans: 用于身份验证的AWS访问密钥ID（可选）
      ja_JP: 認証に使う AWS アクセスキー ID（任意）
    form: form

  - name: aws_secret_access_key
    type: string
    required: false
    label:
      en_US: AWS Secret Access Key
      zh_Hans: AWS秘密访问密钥
      ja_JP: AWS シークレットアクセスキー
    human_description:
      en_US: AWS secret access key for authentication (optional)
      zh_Hans: 用于身份验证的AWS秘密访问密钥（可选）
      ja_JP: 認証に使う AWS シークレットアクセスキー（任意）
    form: form

  - name: result_type
    type: select
    required: true
    label:
      en_US: result type
      zh_Hans: 结果类型
      ja_JP: 返却形式
    human_description:
      en_US: return a list of json or texts
      zh_Hans: 返回一个列表，内容是json还是纯文本
      ja_JP: JSON で返すかプレーンテキストで返すかを選択します
    default: text
    options:
      - value: json
        label:
          en_US: JSON
          zh_Hans: JSON
          ja_JP: JSON
      - value: text
        label:
          en_US: Text
          zh_Hans: 文本
          ja_JP: テキスト
    form: form

  - name: knowledge_base_id
    type: string
    required: true
    label:
      en_US: Bedrock Knowledge Base ID
      zh_Hans: Bedrock知识库ID
      pt_BR: Bedrock Knowledge Base ID
      ja_JP: Bedrock Knowledge Base ID
    human_description:
      en_US: ID of the Bedrock Knowledge Base to retrieve from
      zh_Hans: 用于检索的Bedrock知识库ID
      pt_BR: ID of the Bedrock Knowledge Base to retrieve from
      ja_JP: 検索対象となる Bedrock Knowledge Base の ID
    llm_description: ID of the Bedrock Knowledge Base to retrieve from
    form: form

  - name: query
    type: string
    required: true
    label:
      en_US: Query string
      zh_Hans: 查询语句
      pt_BR: Query string
      ja_JP: クエリ文字列
    human_description:
      en_US: The search query to retrieve relevant information
      zh_Hans: 用于检索相关信息的查询语句
      pt_BR: The search query to retrieve relevant information
      ja_JP: 関連情報を取得するための検索クエリ
    llm_description: The search query to retrieve relevant information
    form: llm

  - name: topk
    type: number
    required: false
    form: form
    label:
      en_US: Limit for results count
      zh_Hans: 返回结果数量限制
      pt_BR: Limit for results count
      ja_JP: 取得件数の上限
    human_description:
      en_US: Maximum number of results to return
      zh_Hans: 最大返回结果数量
      pt_BR: Maximum number of results to return
      ja_JP: 返却する最大件数
    min: 1
    max: 100
    default: 5

  - name: search_type
    type: select
    required: false
    label:
      en_US: search type
      zh_Hans: 搜索类型
      pt_BR: search type
      ja_JP: 検索タイプ
    human_description:
      en_US: search type
      zh_Hans: 搜索类型
      pt_BR: search type
      ja_JP: 使用する検索方式
    llm_description: search type
    default: SEMANTIC
    options:
      - value: SEMANTIC
        label:
          en_US: SEMANTIC
          zh_Hans: 语义搜索
          ja_JP: セマンティック検索
      - value: HYBRID
        label:
          en_US: HYBRID
          zh_Hans: 混合搜索
          ja_JP: ハイブリッド検索
    form: form

  - name: rerank_model_id
    type: select
    required: false
    label:
      en_US: rerank model id
      zh_Hans: 重拍模型ID
      pt_BR: rerank model id
      ja_JP: リランキングモデル ID
    human_description:
      en_US: rerank model id
      zh_Hans: 重拍模型ID
      pt_BR: rerank model id
      ja_JP: 使用するリランキングモデルの ID
    llm_description: rerank model id
    default: default
    options:
      - value: default
        label:
          en_US: default
          zh_Hans: 默认
          ja_JP: デフォルト
      - value: cohere.rerank-v3-5:0
        label:
          en_US: cohere.rerank-v3-5:0
          zh_Hans: cohere.rerank-v3-5:0
          ja_JP: cohere.rerank-v3-5:0
      - value: amazon.rerank-v1:0
        label:
          en_US: amazon.rerank-v1:0
          zh_Hans: amazon.rerank-v1:0
          ja_JP: amazon.rerank-v1:0
    form: form

  - name: metadata_filter   # Additional parameter for metadata filtering
    type: string            # String type, expects JSON-formatted filter conditions
    required: false         # Optional field - can be omitted
    label:
      en_US: Metadata Filter
      zh_Hans: 元数据过滤器
      pt_BR: Metadata Filter
      ja_JP: メタデータフィルター
    human_description:
      en_US: 'JSON formatted filter conditions for metadata (e.g., {"greaterThan": {"key: "aaa", "value": 10}})'
      zh_Hans: '元数据的JSON格式过滤条件（例如，{"greaterThan": {"key": "aaa", "value": 10}}）'
      pt_BR: 'JSON formatted filter conditions for metadata (e.g., {"greaterThan": {"key: "aaa", "value": 10}})'
      ja_JP: 'メタデータに適用する JSON 形式のフィルター条件（例: {"greaterThan": {"key": "aaa", "value": 10}}）'
    form: llm
extra:
  python:
    source: tools/bedrock_retrieve.py
